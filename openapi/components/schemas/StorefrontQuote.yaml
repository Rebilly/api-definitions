type: object
required:
  - websiteId
  - customerId
  - items
properties:
  id:
    readOnly: true
    description: ID of the quote.
    type: string
    maxLength: 50
    example: qt_0YV7DES3WPC5J8JD8QTVNZBZNZ
  type:
    description: Specifies the type of the quote. A quote can be a subscription or a one-time purchase.
    type: string
    readOnly: true
    enum:
      - subscription-order
      - one-time-order
  action:
    description: |-
      Action of the quote. For `change` and `reactivate` actions `orderId` must be provided.
      On acceptance if there are related approved transactions they are applied to the newly issued invoice.
    type: string
    readOnly: true
    enum:
      - create
      - change
      - reactivate
    x-enumDescriptions:
      create: On accept quote new order is created and `orderId` is filled with the order ID.
      change: On accept quote changed items are applied to an order with `orderId`.
        For more information, see [subscription items change](https://www.rebilly.com/docs/dev-docs/api/Orders/PostSubscriptionItemsChange/).
      reactivate: On accept quote change items an order with `orderId` is reactivated and changed items are applied.
        For more information, see [subscription items change](https://www.rebilly.com/docs/dev-docs/api/Orders/PostSubscriptionItemsChange/)
        and [reactivate a subscription](https://www.rebilly.com/docs/dev-docs/api/Orders/PostSubscriptionReactivation/).
    example: create
    default: create
  status:
    description: Status of quote.
    type: string
    readOnly: true
    enum:
      - draft
      - issued
      - accepted
      - rejected
      - canceled
      - expired
    x-enumDescriptions:
      draft: Quote can be edited. This quote cannot be sent to a customer.
      issued: Quote cannot be edited. This quote can be sent to a customer.
      accepted: Customer accepted the quote and created an order.
      rejected: Customer rejected the quote.
      canceled: Organization canceled the quote.
      expired: Expired before customer or organization interaction.
  websiteId:
    $ref: ./WebsiteId.yaml
  customerId:
    $ref: ./CustomerId.yaml
  orderId:
    description: ID of the order.
    readOnly: true
    type:
      - 'string'
      - 'null'
    maxLength: 50
    example: ord_0YV7DES3WPC5J8JD8QTVNZBZNZ
  prepaid:
    type: boolean
    readOnly: true
    description: Defines if quote acceptance requires a payment.
  items:
    type: array
    minItems: 1
    items:
      type: object
      required:
        - plan
        - quantity
      properties:
        id:
          description: ID of the quote item.
          readOnly: true
          type: string
          example: qti_0YV7DES3WPC5J8JD8QTVNZBZNZ
        quantity:
          description: Number of product units in the specified plan.
          type: integer
          minimum: 1
        plan:
          description: Plan details.
          oneOf:
            - $ref: ./OriginalPlan.yaml
            - $ref: ./FlexiblePlan.yaml
        createdTime:
          $ref: ./CreatedTime.yaml
        updatedTime:
          $ref: ./UpdatedTime.yaml
        _embedded:
          type: object
          description: Embedded objects that are requested by the `expand` query parameter.
          readOnly: true
          properties:
            product:
              type: object
  deliveryAddress:
    description: Delivery address of the order.
    oneOf:
      - $ref: ./ContactObject.yaml
      - type: 'null'
  billingAddress:
    description: Billing address of the order.
    oneOf:
      - $ref: ./ContactObject.yaml
      - type: 'null'
  invoicePreview:
    type: object
    description: Preview of the quote invoice.
    readOnly: true
    properties:
      currency:
        description: Currency of the invoice.
        $ref: ./CurrencyCode.yaml
      initialAmounts:
        type: object
        description: Total amounts of the initial invoice.
        properties:
          amount:
            description: Amount of the invoice.
            type: number
            x-type: Money
            format: double
          subtotalAmount:
            description: Subtotal amount of the invoice.
            type: number
            x-type: Money
            format: double
          discountAmount:
            description: Discount amount that is applied to the invoice.
            type: number
            x-type: Money
            format: double
          shippingAmount:
            description: Shipping amount that is applied to the invoice.
            type: number
            x-type: Money
            format: double
          taxAmount:
            description: Tax amount that is applied to the invoice.
            type: number
            x-type: Money
            format: double
      recurringAmounts:
        type:
          - 'object'
          - 'null'
        description: |-
          Total amounts of the recurring invoice.
          This includes recurring items only.
          If the quote does not have recurring items, the value of this field is `null`.
        properties:
          amount:
            description: Amount of the invoice.
            type: number
            x-type: Money
            format: double
          subtotalAmount:
            description: Subtotal amount of the invoice.
            type: number
            x-type: Money
            format: double
          discountAmount:
            description: Discount amount that is applied to the invoice.
            type: number
            x-type: Money
            format: double
          shippingAmount:
            description: Shipping amount that is applied to the invoice.
            type: number
            x-type: Money
            format: double
          taxAmount:
            description: Tax amount that is applied to the invoice.
            type: number
            x-type: Money
            format: double
      items:
        type: array
        description: Invoice items.
        items:
          type: object
          properties:
            quoteItemId:
              description: ID of the related quote item.
              type: string
              example: qti_0YV7DES3WPC5J8JD8QTVNZBZNZ
            type:
              type: string
              description: Type of the invoice item.
              x-basic: true
              enum:
                - debit
                - credit
            name:
              description: Name of the invoice item.
              type: string
              maxLength: 1000
            description:
              description: Description of the invoice item.
              type: string
              example: Charge per approved transaction with DCC
              maxLength: 255
            priceDescription:
              type: string
              description: Price description of the invoice item.
              example: 50% of the markup for approved transactions
              maxLength: 255
            unitPrice:
              description: Unit price of the invoice item.
              type:
                - 'number'
                - 'null'
              format: double
            quantity:
              description: Quantity of the invoice item.
              type: integer
            period:
              description: Date interval of the invoice item.
              type:
                - 'string'
                - 'null'
            setupUnitPrice:
              description: Unit price of the invoice item.
              type:
                - 'number'
                - 'null'
              format: double
            trialUnitPrice:
              description: Unit price of the invoice item.
              type:
                - 'number'
                - 'null'
              format: double
            trialPeriod:
              description: Date interval of the invoice item trial.
              type:
                - 'string'
                - 'null'
            taxAmount:
              description: Invoice item tax.
              type:
                - 'number'
                - 'null'
              format: double
            setupTaxAmount:
              description: Tax amount of the setup that is applied to the invoice.
              type:
                - 'number'
                - 'null'
              format: double
            trialTaxAmount:
              description: Tax amount of the trial that is applied to the invoice.
              type:
                - 'number'
                - 'null'
              format: double
  paymentTerms:
    description: Payment terms for the customer which are displayed on the quote.
    type: string
  expirationTime:
    description: |-
      Date and time when the quote expires. The default expiration time is one month from the time the quote is issued.
      In a `draft` state, this field may be `null`.
    type:
      - 'string'
      - 'null'
    format: date-time
  issuedTime:
    description: Date and time when the quote is issued.
    type:
      - 'string'
      - 'null'
    readOnly: true
    format: date-time
  acceptedTime:
    description: Date and time when the quote is accepted.
    type:
      - 'string'
      - 'null'
    readOnly: true
    format: date-time
  rejectedTime:
    description: Date and time when the quote is rejected.
    type:
      - 'string'
      - 'null'
    readOnly: true
    format: date-time
  canceledTime:
    description: Date and time when the quote is canceled.
    type:
      - 'string'
      - 'null'
    readOnly: true
    format: date-time
  redirectUrl:
    description: URL to redirect the customer to when a quote is rejected. The default value is the website URL.
    type: string
    format: uri
  signature:
    type: object
    properties:
      showWrittenSignatureLines:
        type: boolean
        default: false
        description: Specifies whether to show written signature lines.
      organizationPrintedName:
        type:
          - 'string'
          - 'null'
        description: Printed name of the organization.
        default: null
  shipping:
    $ref: ./Shipping.yaml
  tax:
    $ref: ./Taxes.yaml
  _links:
    type: array
    description: Related links.
    readOnly: true
    items:
      type: object
      properties:
        href:
          description: Link URL.
          type: string
        rel:
          description: |-
            Type of link. If quote is accepted, a customer is redirected to `invoicePaymentFormUrl`
            to pay the initial invoice using one of the methods which are available to the customer.
          type: string
          enum:
            - self
            - invoicePaymentFormUrl
  _embedded:
    type: object
    description: Embedded objects that are requested by the `expand` query parameter.
    readOnly: true
    properties:
      customer:
        type: object
      website:
        type: object
