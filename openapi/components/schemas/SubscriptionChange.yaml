type: object
required:
  - items
  - renewalPolicy
  - prorated
properties:
  items:
    type: array
    minItems: 1
    items:
      type: object
      description: |-
        New set of items for the subscription.
        To remove an item, you include the items array without the items you wish to remove.
      required:
        - plan
        - quantity
      properties:
        plan:
          oneOf:
            - $ref: ./Plans/OriginalPlan.yaml
            - $ref: ./Plans/FlexiblePlan.yaml
        quantity:
          description: Number of units of the product on the given plan.
          type: integer
  renewalPolicy:
    description: Specifies if the subscription retains its current `renewalTime` or resets it to a newly calculated `renewalTime`.
    type: string
    enum:
      - reset
      - retain
  prorated:
    description: |-
      Specifies whether to give a pro rata credit for the amount of time remaining between the `effectiveTime` and the end of the current period.

      In addition, if the `renewalTime` is retained (by setting the `renewalPolicy` to `retain`),
      then a pro rata debit occurs too,
      for the amount between the `effectiveTime` and the `renewalTime` as a percentage of the normal period size.
    type: boolean
  effectiveTime:
    description: |-
      Date from which the renewal time (for `reset` operations) and proration calculations are made.
      If omitted, it defaults to the current time.
    type: string
    format: date-time
  preview:
    description: |-
      If set to true, it does not change the subscription.
      It allows for a way to preview changes to a subscription.
    type: boolean
    default: false
  keepTrial:
    description: |-
      Specifies if the subscription order should retain its active trial.
      Works with the `retain` `renewalPolicy` only.
    type: boolean
    default: false
