allOf:
  - required:
    - type
  - properties:
      upsertCustomer:
        type: boolean
        default: false
        writeOnly: true
        description: If true it will upsert (create or update) a customer. If false the `customerId` must already exist.
      customerId:
        description: The customer identifier string. Optional if upserCustomer true.
      type:
        description: >
          The type of transaction requested.

          You should always include the type within your API request.

          This supports a limited subset of Transaction types.  To refund or void,
          use the refund endpoint.

          To `capture` use the `sale` type. If any existing `authorize` transactions
          are eligible, then they will be captured and the `sale` will be converted
          to a `capture` type.

          The `setup` type will set up the payment instrument by following the `setupInstruction` in the selected gateway account.
          If the instruction is to `do-nothing`, a transaction with result `approved` of type `setup` will be returned.
        type: string
        enum:
          - sale
          - authorize
          - setup
  - $ref: ../Common/CommonTransactionRequest.yaml
  - properties:
      limits:
        title: AmountLimits
        type: object
        nullable: true
        properties:
          amount:
            type: number
            format: double
            example: 275.35
            description: The limit amount.
          currency:
            $ref: ../CurrencyCode.yaml
          resetTime:
            type: string
            format: date-time
            description: The time the limit resets which may be used for some user interfaces.
