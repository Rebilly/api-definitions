type: object
title: QuoteReactivateOrder
required:
  - websiteId
  - customerId
  - items
  - action
  - orderId
properties:
  id:
    readOnly: true
    description: ID of the quote.
    type: string
    maxLength: 50
    example: qt_0YV7DES3WPC5J8JD8QTVNZBZNZ
  type:
    description: Specifies the type of the quote. A quote can be a subscription or a one-time purchase.
    type: string
    readOnly: true
    enum:
      - subscription-order
      - one-time-order
  action:
    description: |-
      Action of the quote for churned/canceled order reactivation.
      On accept quote new invoice is issued to be and linked to `invoiceId`. Quote items are applied to the order.
      The related order will have `pending` status.
      Once the invoice is paid, the order becomes active on `settings.reactivate.effectiveTime` or immediately if `settings.reactivate.effectiveTime` is omitted.
    type: string
    enum:
      - reactivate
    example: reactivate
  orderId:
    description: ID of the related order.
    type:
      - 'string'
      - 'null'
    maxLength: 50
    example: ord_0YV7DES3WPC5J8JD8QTVNZBZNZ
  invoiceId:
    type:
      - 'string'
      - 'null'
    description: ID of the issued invoice after acceptance.
    readOnly: true
    maxLength: 50
    example: in_0YVF9605RKC62BP14NE2R7V2XT
  transactions:
    type: array
    description: Invoice transactions array.
    maxItems: 10
    readOnly: true
    items:
      $ref: ./Transaction.yaml
  status:
    description: Status of the quote.
    type: string
    readOnly: true
    enum:
      - draft
      - issued
      - accepted
      - rejected
      - canceled
      - expired
    x-enumDescriptions:
      draft: Quote can be edited. This quote cannot be sent to a customer.
      issued: Quote cannot be edited. This quote can be sent to a customer.
      accepted: Customer accepted the quote and created an order.
      rejected: Customer rejected the quote.
      canceled: Organization canceled the quote.
      expired: Expired before customer or organization interaction.
  websiteId:
    $ref: ./WebsiteId.yaml
  customerId:
    $ref: ./CustomerId.yaml
  items:
    type: array
    description: Items included in the quote.
    minItems: 1
    items:
      type: object
      required:
        - plan
        - quantity
      properties:
        id:
          description: ID of the quote item.
          readOnly: true
          type: string
          example: qti_0YV7DES3WPC5J8JD8QTVNZBZNZ
        quantity:
          description: Number of product units in the specified plan.
          type: integer
          minimum: 1
        plan:
          description: Plan details.
          oneOf:
            - $ref: ./OriginalPlan.yaml
            - $ref: ./FlexiblePlan.yaml
        description:
          type: string
          description: Description of the quote item.
          example: Charge per approved transaction with DCC
          default: ''
          maxLength: 255
        priceDescription:
          type: string
          description: |-
            Price description of the quote item.
            This value is only used for metered billing items.
          example: 50% of the markup for approved transactions
          default: ''
          maxLength: 255
        usageLimits:
          type:
            - 'object'
            - 'null'
          default: null
          description: |-
            Specifies the soft and hard usage limit thresholds for an item with a metered billing plan.
            This value is ignored when the plan is not metered.
          properties:
            softLimit:
              type: object
              description: |-
                Defines thresholds for notification purposes.
                For example, to notify the customer that their usage is near the hard limit of their metered billing plan.
                This notification informs the customer so that they can upgrade their plan before the hard limit is reached.
                When the reported usage reaches 75%, 90%, and 100% of the configured limit a specific event is fired.
                To notify the customer, a webhook and notification can be configured for this event.
                This field is useful for accounting and customer success purposes.
                The usage of metered billing plans can still be reported if the soft limit is reached.
              minProperties: 1
              maxProperties: 1
              properties:
                quantity:
                  type: integer
                  description: Usage limit quantity.
                  minimum: 1
                amount:
                  type: number
                  format: double
                  description: Usage limit amount in the currency of the order.
                  minimum: 0.01
            hardLimit:
              type: object
              description: |-
                Defines a limit where the customer can no longer use the service.
                Hard limits are used in addition to soft limits.
                When a soft limit is reached,
                a customer may receive a notification
                but the service can still be provided up to the hard limit value so that the customer can upgrade their plan.
                When the reported usage reaches the configured limit,
                a specific event is triggered.
                To notify the customer in the merchant system,
                or block a service,
                a webhook and notification can be configured for this event.
                When the total usage reaches the hard limit quantity,
                or amount values,
                metered billing plan usages can no longer be reported.
              minProperties: 1
              maxProperties: 1
              properties:
                quantity:
                  type: integer
                  description: Usage limit quantity.
                  minimum: 1
                amount:
                  type: number
                  format: double
                  description: Usage limit amount in the currency of the order.
                  minimum: 0.01
        createdTime:
          $ref: ./CreatedTime.yaml
        updatedTime:
          $ref: ./UpdatedTime.yaml
        _embedded:
          type: object
          description: Embedded objects that are requested by the `expand` query parameter.
          readOnly: true
          properties:
            product:
              type: object
  effectiveTime:
    description: |-
      Date and time when the service period starts,
      unless the subscription is canceled but still active.

      If the subscription is still active,
      the subscription continues for the current service period.

      If this field is omitted, this value defaults to the current time.
    type:
      - 'string'
      - 'null'
    format: date-time
  renewalTime:
    description: |-
      Date and time of the next subscription renewal.
      If this field is omitted, this value is computed from the `effectiveTime` field.

      If the subscription is canceled but still active,
      it is ignored and the next renewal occurs as scheduled.
    type:
      - 'string'
      - 'null'
    format: date-time
  paymentInstrumentId:
    description: |-
      ID of the payment instrument.
      If this field is omitted, the subscription payment instrument remains unchanged.
    type:
      - 'string'
      - 'null'
    maxLength: 50
    example: 4f6cf35x-2c4y-483z-a0a9-158621f77a21
  invoicePreview:
    type: object
    description: Preview of the quote invoice.
    readOnly: true
    properties:
      currency:
        description: Currency of the invoice.
        $ref: ./CurrencyCode.yaml
      initialAmounts:
        type: object
        description: Total amounts of the initial invoice.
        properties:
          amount:
            description: Amount of the invoice.
            type: number
            x-type: Money
            format: double
          subtotalAmount:
            description: Subtotal amount of the invoice.
            type: number
            x-type: Money
            format: double
          discountAmount:
            description: Discount amount that is applied to the invoice.
            type: number
            x-type: Money
            format: double
          shippingAmount:
            description: Shipping amount that is applied to the invoice.
            type: number
            x-type: Money
            format: double
          taxAmount:
            description: Tax amount that is applied to the invoice.
            type: number
            x-type: Money
            format: double
      recurringAmounts:
        type:
          - 'object'
          - 'null'
        description: |-
          Total amounts of the recurring invoice.
          This includes recurring items only.
          If the quote does not have recurring items, the value of this field is `null`.
        properties:
          amount:
            description: Amount of the invoice.
            type: number
            x-type: Money
            format: double
          subtotalAmount:
            description: Subtotal amount of the invoice.
            type: number
            x-type: Money
            format: double
          discountAmount:
            description: Discount amount that is applied to the invoice.
            type: number
            x-type: Money
            format: double
          shippingAmount:
            description: Shipping amount that is applied to the invoice.
            type: number
            x-type: Money
            format: double
          taxAmount:
            description: Tax amount that is applied to the invoice.
            type: number
            x-type: Money
            format: double
      items:
        type: array
        description: Invoice items.
        items:
          type: object
          properties:
            quoteItemId:
              description: ID of the related quote item.
              type: string
              example: qti_0YV7DES3WPC5J8JD8QTVNZBZNZ
            type:
              type: string
              description: Type of the invoice item.
              x-basic: true
              enum:
                - debit
                - credit
            name:
              description: Name of the invoice item.
              type: string
              maxLength: 1000
            description:
              description: Description of the invoice item.
              type: string
              example: Charge per approved transaction with DCC
              maxLength: 255
            priceDescription:
              type: string
              description: Price description of the invoice item.
              example: 50% of the markup for approved transactions
              maxLength: 255
            unitPrice:
              description: Unit price of the invoice item.
              type:
                - 'number'
                - 'null'
              format: double
            quantity:
              description: Quantity of the invoice item.
              type: integer
            period:
              description: Date interval of the invoice item.
              type:
                - 'string'
                - 'null'
            setupUnitPrice:
              description: Unit price of the invoice item.
              type:
                - 'number'
                - 'null'
              format: double
            trialUnitPrice:
              description: Unit price of the invoice item.
              type:
                - 'number'
                - 'null'
              format: double
            trialPeriod:
              description: Date interval of the invoice item trial.
              type:
                - 'string'
                - 'null'
            taxAmount:
              description: Invoice item tax.
              type:
                - 'number'
                - 'null'
              format: double
            setupTaxAmount:
              description: Tax amount of the setup that is applied to the invoice.
              type:
                - 'number'
                - 'null'
              format: double
            trialTaxAmount:
              description: Tax amount of the trial that is applied to the invoice.
              type:
                - 'number'
                - 'null'
              format: double
  paymentTerms:
    description: Payment terms for the customer which are displayed on the quote.
    type: string
  expirationTime:
    description: |-
      Date and time when the quote expires. The default expiration time is one month from the time the quote is issued.
      In a `draft` state, this field may be `null`.
    type:
      - 'string'
      - 'null'
    format: date-time
  issuedTime:
    description: Date and time when the quote is issued.
    type:
      - 'string'
      - 'null'
    readOnly: true
    format: date-time
  acceptedTime:
    description: Date and time when the quote is accepted.
    type:
      - 'string'
      - 'null'
    readOnly: true
    format: date-time
  rejectedTime:
    description: Date and time when the quote is rejected.
    type:
      - 'string'
      - 'null'
    readOnly: true
    format: date-time
  canceledTime:
    description: Date and time when the quote is canceled.
    type:
      - 'string'
      - 'null'
    readOnly: true
    format: date-time
  redirectUrl:
    description: URL to redirect the customer to when a quote is rejected. The default value is the website URL.
    type: string
    format: uri
  signature:
    type: object
    properties:
      showWrittenSignatureLines:
        type: boolean
        default: false
        description: Specifies whether to show written signature lines.
      organizationPrintedName:
        type:
          - 'string'
          - 'null'
        description: Printed name of the organization.
        default: null
  shipping:
    $ref: ./Shipping.yaml
  tax:
    $ref: ./Taxes.yaml
  couponIds:
    type:
      - 'array'
      - 'null'
    description: |-
      List of coupons to redeem on the customer and apply to the order when the quote is accepted.

      For more information, see [Coupons](https://www.rebilly.com/docs/settings/coupons-and-discounts/).
    items:
      type: string
      description: Coupon ID.
  _links:
    type: array
    description: Related links.
    readOnly: true
    items:
      type: object
      properties:
        href:
          description: Link URL.
          type: string
        rel:
          description: Type of link.
          type: string
          enum:
            - self
            - quoteAcceptanceFormUrl
  _embedded:
    type: object
    description: Embedded objects that are requested by the `expand` query parameter.
    readOnly: true
    properties:
      customer:
        type: object
      website:
        type: object
      order:
        type: object
